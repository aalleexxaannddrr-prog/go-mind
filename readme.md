# GoMind

GoMind — это продакшен-проект для разработки мобильного приложения, объединяющего аукционную систему рекламы, систему викторин с наградной системой и управление финансовыми операциями пользователей.

---

## Содержание

- [Общая информация](#общая-информация)
- [Цель проекта](#цель-проекта)
- [Ключевые функции](#ключевые-функции)
- [Требования к функционалу](#требования-к-функционалу)
  - [Аутентификация и авторизация](#аутентификация-и-авторизация)
  - [Управление рекламой](#управление-рекламой)
  - [Система викторин](#система-викторин)
  - [Финансовые операции](#финансовые-операции)
- [Архитектура приложения](#архитектура-приложения)
  - [Технологический стек](#технологический-стек)
  - [Основные сущности](#основные-сущности)
- [Логика работы](#логика-работы)
  - [Аукцион рекламы](#аукцион-рекламы)
  - [Викторины](#викторины)
- [API](#api)
- [Безопасность](#безопасность)
- [Инфраструктура и CI/CD](#инфраструктура-и-cicd)
- [Установка и запуск](#установка-и-запуск)
  - [Maven конфигурация](#maven-конфигурация)
  - [Docker Compose](#docker-compose)
- [Заключение](#заключение)
- [Контакты](#контакты)

---

## Общая информация

- **Название проекта:** GoMind
- **Описание:** Мобильное приложение для проведения аукционов рекламных мест, организации викторин с начислением баллов и управления финансовыми операциями пользователей.
- **Целевая аудитория:** Пользователи, участвующие в аукционах рекламы и викторинах, а также администраторы для управления системой.

## Цель проекта

Создать надежное, масштабируемое и безопасное приложение, которое:
- Интегрирует аукционную систему рекламы с участием пользователей.
- Позволяет проводить викторины с начислением баллов и распределением рекламного дохода победителю.
- Обеспечивает финансовые операции (депозиты, списания, выплаты) в режиме реального времени.

---

## Ключевые функции

- **Аутентификация и авторизация:**  
  Регистрация с подтверждением email, авторизация через JWT-токены, ролевой доступ (Администратор, Пользователь, Анонимный пользователь).

- **Управление рекламой:**  
  Создание рекламных объявлений с указанием ставки в «грушах», участие в аукционе с динамической заменой активной рекламы.

- **Система викторин:**  
  Проведение викторин с фиксированным временем (например, 1 час), начисление баллов за правильные ответы и определение победителя на основе максимального количества баллов.

- **Финансовые операции:**  
  Пополнение баланса, списание средств за участие в аукционах и выплата выигрышей победителям викторин.

---

## Требования к функционалу

### Аутентификация и авторизация

- **Регистрация:**  
  - Регистрация новых пользователей с подтверждением email.
- **Аутентификация:**  
  - Использование JWT-токенов для безопасного доступа.
- **Ролевой доступ:**  
  - **Администратор:** Управление пользователями, рекламой и викторинами.  
  - **Пользователь:** Участие в аукционах рекламы и викторинах.  
  - **Анонимный пользователь:** Ограниченный доступ к общедоступным ресурсам.

### Управление рекламой

- Пользователи могут создавать рекламные объявления с указанием ставки в «грушах».
- Объявления участвуют в аукционе, где активной становится реклама с наивысшей ставкой.
- При появлении более высокой ставки активное объявление заменяется.
- Активная реклама отображается участникам викторин.

### Система викторин

- Проведение викторин с фиксированным временем (например, 1 час).
- Пользователи отвечают на вопросы викторины и за правильные ответы получают баллы.
- Победитель определяется по максимальному количеству набранных баллов.
- Победитель получает доход, сформированный из рекламного пула за время проведения викторины.

### Финансовые операции

- Пополнение баланса через интегрированные платёжные системы.
- Списание средств за участие в аукционах рекламы.
- Выплата выигрышей победителям викторин.

---

## Архитектура приложения

### Технологический стек

- **Серверная часть:** [Spring Boot](https://spring.io/projects/spring-boot)
- **База данных:** MySQL (с использованием Hibernate ORM)
- **Аутентификация:** JWT
- **REST API:** HTTP/HTTPS
- **Язык программирования:** Java (минимальная версия 17)
- **Сборка:** Maven

### Основные сущности

1. **Пользователь (User):**
   - **Поля:** `id`, `email`, `nickname`, `role`, `balance`.

2. **Реклама (Advertisement):**
   - **Поля:** `id`, `content`, `bid`, `owner`, `status`.

3. **Викторина (Quiz):**
   - **Поля:** `id`, `questions`, `endTime`, `rewardPool`.

4. **История викторин (QuizHistory):**
   - **Поля:** `id`, `userId`, `quizId`, `score`.

5. **Транзакция (Transaction):**
   - **Поля:** `id`, `userId`, `amount`, `type`, `timestamp`.

---

## Логика работы

### Аукцион рекламы

1. Пользователь создает рекламное объявление, указывая ставку в «грушах».
2. При условии, что ставка превышает текущую максимальную:
   - Новое объявление становится активным.
   - Баланс пользователя уменьшается на сумму ставки.

### Викторины

1. Пользователи участвуют в викторинах, отвечая на вопросы.
2. За правильные ответы начисляются баллы.
3. Победитель определяется по наибольшему количеству набранных баллов.
4. Победителю выплачивается доход, сформированный из рекламного пула.

---

## API

Проект предоставляет REST API для взаимодействия с клиентами. Ниже приведены основные эндпоинты:

### Аутентификация

- `POST /auth/register`  
  Регистрация нового пользователя.

- `POST /auth/login`  
  Вход пользователя (аутентификация с использованием JWT).

### Реклама

- `POST /ads`  
  Создание нового рекламного объявления.

- `GET /ads/current`  
  Получение текущей активной рекламы.

### Викторины

- `GET /quizzes/current`  
  Получение данных о текущей викторине.

- `POST /quizzes/answer`  
  Отправка ответа на вопрос викторины.

### Финансы

- `POST /transactions/deposit`  
  Пополнение баланса пользователя.

- `GET /transactions/history`  
  Получение истории финансовых операций.

---

## Безопасность

- **Хэширование паролей:**  
  Используется алгоритм BCrypt для безопасного хранения паролей.

- **Аутентификация:**  
  Реализована с использованием JWT-токенов.

- **Контроль доступа:**  
  Методы и эндпоинты защищены с помощью аннотаций Spring Security (например, `@PreAuthorize`).

---

## Инфраструктура и CI/CD

- **Операционная система сервера:** Ubuntu 20.04
- **База данных:** MySQL 8.0
- **Сервер приложений:** Apache Tomcat
- **Load Balancer:** NGINX
- **CI/CD:** GitHub Actions для автоматизированной сборки, тестирования и развертывания

---

## Установка и запуск

### Предварительные требования

- **Java 17 или выше**
- **Maven**
- **Docker и Docker Compose** (для развёртывания контейнеризированной версии приложения)
- **MySQL 8.0**
